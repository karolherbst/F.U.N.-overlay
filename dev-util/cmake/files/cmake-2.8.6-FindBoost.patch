From c7a600899bc3ca186ea1049af80bdc50b0d9ac49 Mon Sep 17 00:00:00 2001
From: Johannes Huber <johu@gentoo.org>
Date: Fri, 13 Jan 2012 09:29:35 +0100
Subject: [PATCH] Use eselected version in non exact version find operation.
 Fixes gentoo bug
 https://bugs.gentoo.org/show_bug.cgi?id=335108.

---
 Modules/FindBoost.cmake |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/Modules/FindBoost.cmake b/Modules/FindBoost.cmake
index 9c03b3d..9ccda31 100644
--- a/Modules/FindBoost.cmake
+++ b/Modules/FindBoost.cmake
@@ -73,6 +73,9 @@
 # binary Boost releases do so.
 #
 # set(Boost_ADDITIONAL_VERSIONS "1.78" "1.78.0" "1.79" "1.79.0")
+
+# Some future versions to be safe
+set(Boost_ADDITIONAL_VERSIONS "1.50.0" "1.50" "1.49.0" "1.49" "1.48.0" "1.48")
 #
 # ===================================== ============= ========================
 #
@@ -658,9 +661,14 @@ else(_boost_IN_CACHE)
             _boost_BOOSTIFIED_VERSION ${_boost_VER})
       endif()
 
-      list(APPEND _boost_PATH_SUFFIXES "boost-${_boost_BOOSTIFIED_VERSION}")
-      list(APPEND _boost_PATH_SUFFIXES "boost_${_boost_BOOSTIFIED_VERSION}")
-
+      # Rely only on eselected sym link version in gentoo
+      # in case of no exact version version search.
+      # See https://bugs.gentoo.org/show_bug.cgi?id=335108
+      if( Boost_FIND_VERSION_EXACT )
+      	list(APPEND _boost_PATH_SUFFIXES "boost-${_boost_BOOSTIFIED_VERSION}")
+      	list(APPEND _boost_PATH_SUFFIXES "boost_${_boost_BOOSTIFIED_VERSION}")
+      endif( Boost_FIND_VERSION_EXACT )
+    
     endforeach(_boost_VER)
 
     if(Boost_DEBUG)
-- 
1.7.8.3

